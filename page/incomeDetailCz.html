<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>单日收入明细</title>
    <link rel="stylesheet" href="../css/mui.min.css">
    <link rel="stylesheet" href="../css/iconfont.css">
    <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8"/>
    <link rel="stylesheet" href="../plugins/layer/theme/default/layer.css" type="text/css" charset="utf-8"/>
    <link rel="stylesheet" href="../css/mui.picker.min.css" type="text/css" charset="utf-8"/>
    <script src="../js/jquery-3.3.1.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="../plugins/layer/layer.js"></script>
    <script src="../js/hammer.min.js"></script>
    <script src="../js/jquery.hammer.js"></script>
    <script src="../js/common.js"></script>
    <script src="../js/base.js"></script>
    <script src="../js/mui.min.js"></script>
    <style type="text/css">

        .topBox{
            position: relative;
        }

        .dataList{
            font-size: .9rem;
        }
        .dataList .mui-badge{
            background: transparent;
            font-size: .9rem;
            color: #333;
            font-weight: 300;
        }
        .dataList .mui-badge b{
            font-weight: 300;
        }

        .topBox .row1{
            padding: 10px;
            color: #6F6F70;
            font-size: .9rem;
            padding-bottom: 0px;
        }
        .topBox .row2{
            font-size: .7rem;
            padding: 0 10px;
            color: #A9A9AA;
            padding-bottom: 5px;
        }

        #loadMore{
            background: #eaeaea;
            padding: 10px;
            text-align: center;
            font-size: .8rem;
            display: none;
        }
        .noMore{
            padding: 10px;
            text-align: center;
            font-size: .8rem;
            display: none;
        }

        .mui-table{
            background: #fff;
            text-align: center;
            line-height: 40px;
            font-size: .9rem;
        }

        .mui-table .dataList tr{
            border-top: #F0F2F4 solid 1px;
            position: relative;
        }
        .mui-table .dataList tr i{
            color: #A7ABB0;
        }
    </style>

</head>
<body>

<header class="mui-bar mui-bar-nav">
    <a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
    <h1 class="mui-title">桩收入明细</h1>
</header>

<div class="mui-content">

    <div class="topBox">
        <div class="row1 selectDate"><span class="dateBox">loading</span> <i class="iconfont icon-xiala1"></i> </div>
        <div class="row2">
            <div class="left">总收入 : <span id="benyuemoney">0</span>元</div>
            <div class="clearfix"></div>
        </div>
    </div>

    <div class="dataBox">
        <table class="mui-table" id="dataTable">
            <thead>
            <tr>
                <td>插座号</td>
                <td>营业额</td>
                <td>收入</td>
                <td>消费时间</td>
            </tr>
            </thead>
            <tbody class="dataList">
            <tr class="dataItem" data-id="{{id}}">
                <td>A</td>
                <td class="sumMoney">加载中...</td>
                <td class="partnerMoney">加载中....</td>
                <td class="time">加载中...</td>
            </tr>
            </tbody>
        </table>
    </div>

    <div id="loadMore">加载更多</div>
    <div id="noMore" class="noMore">没有更多了</div>
</div>

<script type="text/html" id="dataTmpl">

</script>

<script type="text/javascript" src="../js/mui.picker.all.js"></script>
<script type="text/javascript">
    mui.init();

    var uuid;

    var cdzID = getQueryString("cdzID");
    var year = getQueryString("year");
    var month = getQueryString("month");
    var day = '1';
    if(!vaildeParam(cdzID) || !vaildeParam(year) || !vaildeParam(month)){
        layer.msg("非法操作");
        clicked("myIncome.html");
    }

    var nowDate = new Date();
    var day = nowDate.format("dd")

    $(".dateBox").html(year+"年"+month+"月"+day+"日")

    if(window.plus){
        pagePlusReady();
    }else{
        document.addEventListener('plusready',pagePlusReady,false);
    }


    function mGetDate(year, month){
        var d = new Date(year, month, 0);
        return d.getDate();
    }


    $(".selectDate").click(function () {

        var monthDayCount = mGetDate(year,month);

        var options = {
            'type':'day'
        }

        var dayArr = new Array();

        for(var i=1;i<=monthDayCount;i++){
            var dayObj = new Object();
            dayObj.value = i+"";
            dayObj.text = i+"日";
            dayArr.push(dayObj);
        }

        var picker = new mui.PopPicker({
            layer: 2
        });
        picker.setData( [{
            value: month,
            text: month+'月',
            children: dayArr
        }])
        picker.show(function (selectItems) {
            console.log(JSON.stringify(selectItems));
            console.log(selectItems[1].value);
            day = selectItems[1].value+"";

            $(".dateBox").html(year+"年"+month+"月"+day+"日")

        })
    })


    function pagePlusReady(){
        uuid = plus.storage.getItem("uuid");


    }



</script>
</body>
</html>