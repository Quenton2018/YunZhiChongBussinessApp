<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>片区申请</title>
	<link rel="stylesheet" href="../css/mui.min.css">
	<link rel="stylesheet" href="../css/iconfont.css">
	<link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8"/>
	<link rel="stylesheet" href="../plugins/layer/theme/default/layer.css" type="text/css" charset="utf-8"/>
	<script src="../js/jquery-3.3.1.min.js"></script>
	<script src="../js/bootstrap.min.js"></script>
	<script src="../plugins/layer/layer.js"></script>
	<script src="../js/hammer.min.js"></script>
	<script src="../js/jquery.hammer.js"></script>
	<script src="../js/common.js"></script>
	<script src="../js/base.js"></script>
    <script src="../js/mui.min.js"></script>
    <style type="text/css">
        .topAlertIfo{
            font-size: .8rem;
            padding: 15px;
        }
        .topInfo{
            font-size: 1rem;
            padding: 15px;
        }
        .mui-content{
            background-color: #ffffff;
        }
        .application-Box{
            overflow: hidden;
            margin-bottom: 0;
            margin: 15px;
            padding-top: 1rem;
        }
        .application-Box .inputBox{
            position: relative;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }
        .application-Box .inputBox i{
            font-size: 1rem;
            position: absolute;
            left: 10px;
            line-height: 2.5rem;
            color: #000;
        }
        .application-Box input{
            display: block;
            border: none;
            background: #F0F1F3;
            padding-left: 80px;
            border-radius: 20px;
            font-size: .9rem;
        }
        .application-Box input:focus{
            outline: none;
        }
        .getCode{
            position: absolute;
            right: 10px;
            top: 0;
            color: #333;
            font-size: .8rem;
            height: 40px;
            line-height: 40px;
            padding: 0 10px;
        }

        #submitBtn{
            display: block;
            width: 100%;
            position: fixed;
            bottom: 0;
            background-color: #FF7546;
            height: 60px;
            color: #ffff;
        }

    .btn-class{
        width: 50%;
        margin: 0 auto;
        text-align: center;
        margin-top: 10px;
    }

        .mui-input-row .mui-numbox {
            /* float: right; */
            margin: 2px 8px;
            float: left;
            margin-left: 0px;
            width: 160px;
        }
    </style>

</head>
<body style="background: #fff">

    <header class="mui-bar mui-bar-nav">
        <a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
        <h1 class="mui-title">合伙人设置</h1>
    </header>

    <div class="mui-content" style="background: #fff;    padding-bottom: 100px;">
        <div class="topAlertIfo">
            请正确填写信息 合伙人手机为平台账号
        </div>

        <div  id="dataList">
            <h1 class="topInfo">
                合伙人信息
            </h1>
            <form class="mui-input-group memberItem">
                <div class="mui-input-row">
                    <label>合伙人姓名</label>
                    <input type="text" class="mui-input-clear" name="users" placeholder="请输入合伙人姓名">
                </div>
                <div class="mui-input-row">
                    <label>合伙人手机</label>
                    <input type="text" class="mui-input-clear" name="mobile" placeholder="请输入合伙人手机">
                </div>
                <div class="mui-input-row">
                    <label>第一年比例</label>
                    <div class="mui-numbox">
                        <!-- "-"按钮，点击可减小当前数值 -->
                        <button class="mui-btn mui-numbox-btn-minus" type="button">-</button>
                        <input class="mui-numbox-input" type="number"  name="rate1" />
                        <!-- "+"按钮，点击可增大当前数值 -->
                        <button class="mui-btn mui-numbox-btn-plus" type="button">+</button>
                    </div>
                </div>
                <div class="mui-input-row">
                    <label>第二年比例</label>
                    <div class="mui-numbox">
                        <!-- "-"按钮，点击可减小当前数值 -->
                        <button class="mui-btn mui-numbox-btn-minus" type="button">-</button>
                        <input class="mui-numbox-input" type="number"  name="rate2" />
                        <!-- "+"按钮，点击可增大当前数值 -->
                        <button class="mui-btn mui-numbox-btn-plus" type="button">+</button>
                    </div>
                </div>
            </form>
        </div>
        <div class="btn-class">
            <button type="button" class="mui-btn mui-btn-success addHeHuoRen">新增一个合伙人</button>
        </div>

        <button id="submitBtn">
                下一步
        </button>
    </div>
    <script type="text/html" id="heHuoRenTmpl">
            <form class="mui-input-group memberItem">
                <div class="mui-input-row ">
                    <label>合伙人姓名</label>
                    <input type="text" class="mui-input-clear" name="users" placeholder="请输入合伙人姓名">
                </div>
                <div class="mui-input-row">
                    <label>合伙人手机</label>
                    <input type="text" class="mui-input-clear" name="mobile" placeholder="请输入合伙人手机">
                </div>
                <div class="mui-input-row">
                    <label>第一年比例</label>
                    <div class="mui-numbox">
                        <!-- "-"按钮，点击可减小当前数值 -->
                        <button class="mui-btn mui-numbox-btn-minus" type="button">-</button>
                        <input class="mui-numbox-input" type="number"  value="0" name="rate1" />
                        <!-- "+"按钮，点击可增大当前数值 -->
                        <button class="mui-btn mui-numbox-btn-plus" type="button">+</button>
                    </div>
                </div>
                <div class="mui-input-row">
                    <label>第二年比例</label>
                    <div class="mui-numbox">
                        <!-- "-"按钮，点击可减小当前数值 -->
                        <button class="mui-btn mui-numbox-btn-minus" type="button">-</button>
                        <input class="mui-numbox-input" type="number" value="0"  name="rate2" />
                        <!-- "+"按钮，点击可增大当前数值 -->
                        <button class="mui-btn mui-numbox-btn-plus" type="button">+</button>
                    </div>
                </div>
            </form>
    </script>


	<script type="text/javascript">
        mui.init();

        if(window.plus){
            pagePlusReady();
        }else{
            document.addEventListener('plusready',pagePlusReady,false);
        }
        function pagePlusReady(){
            $("#submitBtn").click(function(){ //下一步
                    //服务校验参数 然后保存
                    var uuid = plus.storage.getItem("uuid");
                    var app_name = plus.storage.getItem("app_name");
                    var app_address = plus.storage.getItem("app_address");
                    var app_latitude = plus.storage.getItem("app_latitude");
                    var app_longitude = plus.storage.getItem("app_longitude");
                    var app_electricPrice = plus.storage.getItem("app_electricPrice");

                /*  console.log("uuid======"+uuid);
                    console.log("app_name======"+app_name);
                    console.log("app_address======"+app_address);
                    console.log("app_latitude======"+app_latitude);
                    console.log("app_longitude======"+app_longitude);
                    console.log("app_electricPrice======"+app_electricPrice);*/

                var $memberItem = $(".memberItem");
                var memberList = new Array();
                var memberListJson = '';
                $.each($memberItem,function (index,item) {
                    var users =  $(item).find( $("input[name='users']")).val();
                    var mobile =  $(item).find( $("input[name='mobile']")).val();
                    var rate1 =  $(item).find( $("input[name='rate1']")).val();
                    var rate2 =  $(item).find( $("input[name='rate2']")).val();

                    var member = new Object();
                    member.users = users;
                    member.mobile = mobile;
                    member.rate1 = rate1;
                    member.rate2 = rate2;
                    memberList.push(member);
                })
                memberListJson = JSON.stringify(memberList);
                console.log("memberListJson"+memberListJson);
                plus.storage.setItem( "memberListJson", memberListJson);
                clicked('electricityPrice.html');  //下一步

            });
        }
        /**
         * 添加一个合伙人
         */
        $(".addHeHuoRen").click(function () {
            var tmpl = $("#heHuoRenTmpl").html();
            $("#dataList").append(tmpl);
            mui('.mui-numbox').numbox()
        })


	</script>
</body>
</html>